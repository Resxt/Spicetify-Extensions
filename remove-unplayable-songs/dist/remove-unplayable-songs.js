var removeDunplayableDsongs=(()=>{Spicetify.React;async function t(t){t=await Spicetify.CosmosAsync.get("sp://core-playlist/v1/playlist/"+t[0]);if(t.playlist.userCapabilities.canAdministratePermissions){let e=[];t.items.forEach(t=>{t.playable||e.push({uri:t.link})});var i,o,t=Spicetify.URI.fromString(t.playlist.link).id;void 0!==t&&(i=t,function(i){var o=[[]];for(let e=0;e<i.length;e+=100){let t=e+100;t>i.length&&(t=i.length),o.push(i.slice(e,t))}return o}(o=e).forEach(t=>{Spicetify.CosmosAsync.del(`https://api.spotify.com/v1/playlists/${i}/tracks`,{tracks:t}).catch(t=>{Spicetify.showNotification("Failed to remove unplayable songs. See console for more details"),console.error(t)}).then(()=>{0==o.length?Spicetify.showNotification("No unplayable songs found"):Spicetify.showNotification("Successfully removed "+o.length+" unplayable songs")})}))}else Spicetify.showNotification("You are not allowed to remove songs in this playlist")}var e=async function(){for(;null==Spicetify||!Spicetify.showNotification;)await new Promise(t=>setTimeout(t,100));new Spicetify.Menu.Item("Remove unplayable liked songs",!0,()=>{!async function(){const e=await async function(){var t=await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/me");let e=[],i=await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/me/tracks?limit=50&market="+t.country);i.items.forEach(t=>{t.track.is_playable||e.push(t.track.id)});for(;null!=i.next&&null!=i.next;)(i=await Spicetify.CosmosAsync.get(i.next)).items.forEach(t=>{t.track.is_playable||e.push(t.track.id)});return e}(),t=function(i){var o=[[]];for(let e=0;e<i.length;e+=50){let t=e+50;t>i.length&&(t=i.length),o.push(i.slice(e,t))}return o}(e);t.forEach(t=>{Spicetify.CosmosAsync.del("https://api.spotify.com/v1/me/tracks?ids="+t.toString()).catch(t=>{Spicetify.showNotification("Failed to remove unplayable liked songs. See console for more details"),console.error(t)}).then(()=>{0==e.length?Spicetify.showNotification("No unplayable songs found"):Spicetify.showNotification("Successfully removed "+e.length+" unplayable songs")})})}()},"block").register(),new Spicetify.ContextMenu.Item("Remove unplayable songs",t,t=>Spicetify.URI.isPlaylistV1OrV2(t[0]),"block").register()};(async()=>{await e()})()})();