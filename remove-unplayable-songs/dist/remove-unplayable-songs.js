var removeDunplayableDsongs=(()=>{async function i(i){i=await Spicetify.CosmosAsync.get("sp://core-playlist/v1/playlist/"+i[0]);if(i.playlist.userCapabilities.canAdministratePermissions){let e=[];i.items.forEach(i=>{i.playable||e.push({uri:i.link})});var t,s,i=Spicetify.URI.fromString(i.playlist.link).getBase62Id();t=i,function(t){var s=[[]];for(let e=0;e<t.length;e+=100){let i=e+100;i>t.length&&(i=t.length),s.push(t.slice(e,i))}return s}(s=e).forEach(i=>{Spicetify.CosmosAsync.del(`https://api.spotify.com/v1/playlists/${t}/tracks`,{tracks:i}).catch(i=>{Spicetify.showNotification("Failed to remove unplayable songs. See console for more details"),console.error(i)}).then(()=>{0==s.length?Spicetify.showNotification("No unplayable songs found"):Spicetify.showNotification("Successfully removed "+s.length+" unplayable songs")})})}else Spicetify.showNotification("You are not allowed to remove songs in this playlist")}var e=async function(){for(;null==Spicetify||!Spicetify.showNotification;)await new Promise(i=>setTimeout(i,100));new Spicetify.ContextMenu.Item("Remove unplayable songs",i,Spicetify.URI.isPlaylistV1OrV2,"block").register()};(async()=>{await e()})()})();